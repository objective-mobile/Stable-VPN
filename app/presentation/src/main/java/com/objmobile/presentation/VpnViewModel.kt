package com.objmobile.presentation

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.objmobile.domain.StableVpnStatus
import com.objmobile.domain.VpnRepository
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.SharingStarted
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.stateIn
import kotlinx.coroutines.launch

class VpnViewModel(private val vpnRepository: VpnRepository) : ViewModel() {
    val vpnStatus: StateFlow<StableVpnStatus> = vpnRepository.stableVpnStatus.stateIn(
        viewModelScope, SharingStarted.WhileSubscribed(1000), StableVpnStatus.Disconnected
    )

    fun connectVpn() {
        vpnRepository.connectProfile(
            "USA",
            "# Automatically generated OpenVPN client config file\n" + "# Generated on Thu Dec 18 14:44:27 2025 by ip-10-0-8-12\n" + "# Note: this config file contains inline private keys\n" + "#       and therefore should be kept confidential!\n" + "#       Certificate serial: 7, certificate common name: users_AUTOLOGIN\n" + "#       Expires 2035-12-16 14:44:27\n" + "# Note: this configuration is user-locked to the username below\n" + "# OVPN_ACCESS_SERVER_USERNAME=users\n" + "# Define the profile name of this particular configuration file\n" + "# OVPN_ACCESS_SERVER_PROFILE=users@3.217.107.75/AUTOLOGIN\n" + "# OVPN_ACCESS_SERVER_AUTOLOGIN=1\n" + "\n" + "# Default Cipher\n" + "cipher AES-256-CBC\n" + "# OVPN_ACCESS_SERVER_CLI_PREF_ALLOW_WEB_IMPORT=True\n" + "# OVPN_ACCESS_SERVER_CLI_PREF_BASIC_CLIENT=False\n" + "# OVPN_ACCESS_SERVER_CLI_PREF_ENABLE_CONNECT=False\n" + "# OVPN_ACCESS_SERVER_CLI_PREF_ENABLE_XD_PROXY=True\n" + "# OVPN_ACCESS_SERVER_WSHOST=3.217.107.75:443\n" + "# OVPN_ACCESS_SERVER_WEB_CA_BUNDLE_START\n" + "# -----BEGIN CERTIFICATE-----\n" + "# MIIDGjCCAgKgAwIBAgIEaUQIJTANBgkqhkiG9w0BAQsFADA+MTwwOgYDVQQDDDNP\n" + "# cGVuVlBOIFdlYiBDQSAyMDI1LjEyLjE4IDEzOjU2OjUzIFVUQyBpcC0xMC0wLTgt\n" + "# MTIwHhcNMjUxMjE3MTM1NjUzWhcNMzUxMjE2MTM1NjUzWjA+MTwwOgYDVQQDDDNP\n" + "# cGVuVlBOIFdlYiBDQSAyMDI1LjEyLjE4IDEzOjU2OjUzIFVUQyBpcC0xMC0wLTgt\n" + "# MTIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC94L7SsQxT3rY5c7pf\n" + "# CbfqO1VrfpMw1gyghU0KOrH+TEDBH8NCLDV3B1ddXtYHG9vOknMfST9mxgNUDJ1C\n" + "# nYWBF/Z4xBT3l80nfeyhGC0ZLZJfpt2U0b5najQ+RcpAvvISZMEVEtiQzBz563yF\n" + "# ZiA2/2Qi7k1FKG8yxYiOgisDnJwmov1qHgZ3Js2EP/5bcCsrpQPb37SwTaP4HB9K\n" + "# pPVxt6ZJo/q+e9BkD9bkeJxht6Y2QNuqpm65lo7XXyQp+zIvNgSxDa18n+xeddzi\n" + "# rWTz0AEJfUWsY7b7Hm2rK4YTmotrzAbw441Hd6EjNQVwGp9acaLvR8tYsz2dP+wi\n" + "# G9OdAgMBAAGjIDAeMA8GA1UdEwEB/wQFMAMBAf8wCwYDVR0PBAQDAgEGMA0GCSqG\n" + "# SIb3DQEBCwUAA4IBAQCehVL3F04BX44OpZi37gEGV11cmejyv9B2jl/mbx/aoOIE\n" + "# Ai3+g3Kbz/hk4ZRLtW1+/qU1InbGVpT4l2UO/qkcyHsm0YeUkml7fZFxaPrIubh2\n" + "# VrxftNPmP2tMr3ir+lZTjbTyi0KjkIVkyQ7gnqckFKh5gge0QuENgsEiuOnSc8hq\n" + "# M+MrfJNu1QVtOJriqBRq1oMuhHBV/9z/2RnNZrsrX+S4Epdp+6oxlr5K9fj7tn7y\n" + "# sWXxvyH7qoSU6Ehn1Y7reUkUiMW+yUaC15i2luJGw7h0UeYEQl+jtLHudgpGguwz\n" + "# Elon3i5S7RnksbT2QAeR177IdYLJwtz2d0FRwhYN\n" + "# -----END CERTIFICATE-----\n" + "# OVPN_ACCESS_SERVER_WEB_CA_BUNDLE_STOP\n" + "# OVPN_ACCESS_SERVER_IS_OPENVPN_WEB_CA=1\n" + "client\n" + "server-poll-timeout 4\n" + "nobind\n" + "remote 3.217.107.75 1194 udp\n" + "remote 3.217.107.75 1194 udp\n" + "remote 3.217.107.75 443 tcp\n" + "remote 3.217.107.75 1194 udp\n" + "remote 3.217.107.75 1194 udp\n" + "remote 3.217.107.75 1194 udp\n" + "remote 3.217.107.75 1194 udp\n" + "remote 3.217.107.75 1194 udp\n" + "dev tun\n" + "dev-type tun\n" + "remote-cert-tls server\n" + "tls-version-min 1.2\n" + "reneg-sec 604800\n" + "verb 3\n" + "push-peer-info\n" + "\n" + "<ca>\n" + "-----BEGIN CERTIFICATE-----\n" + "MIICyDCCAbCgAwIBAgIEaUQIHzANBgkqhkiG9w0BAQsFADAVMRMwEQYDVQQDDApP\n" + "cGVuVlBOIENBMB4XDTI1MTIxNzEzNTY0N1oXDTM1MTIxNjEzNTY0N1owFTETMBEG\n" + "A1UEAwwKT3BlblZQTiBDQTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEB\n" + "ANrzKfwVLEFGiaWn3VcYQ9w3HU1KjYgouWiKgUJ6QW6Mek5Yxx9I4E1k9lSuDT1f\n" + "9EyI6Q6XObMrtMrbhiMlDa+Opfcs8o3OGuYW8c9W9cPhhavpmGCcul4cdx2nCqzK\n" + "EVEPd03k7nDyw9D3fb2iA0E5zCP2D/e8tgn90HEzEcjOKrru3dHW+FXx4xolhYRM\n" + "SBakDluO1VOSe94IL4syJH2m6m3foqGa3SJ5Z/dBCCVyhZNCn3jfuOKw9yp+1skW\n" + "66weRuAFriQefNnah6KZwhdSLyLfG1Upos6mmoaXy0a1Rbg3unZWKLXWOmhzj31W\n" + "2oIM5wO8Cwh31ofeG1Fp88kCAwEAAaMgMB4wDwYDVR0TAQH/BAUwAwEB/zALBgNV\n" + "HQ8EBAMCAQYwDQYJKoZIhvcNAQELBQADggEBAD4h4ISlkCW/7dzyoniIfM3QBQnS\n" + "QfeZQC1IUQ29fQY0Pq5ekKIQwjsrDyVYNvl/mzSFz4MV4TMPd+JfJj2npjWEr9dO\n" + "VJZGztbWG7947elKXUYBN6ttUYlI6ADWrzhxFSGNhLqIk5aYSvZbtLE+ZYhjMJqh\n" + "fzcgeNyvEASsdof0uTJ3rheK4TJ2piHw9v2gGP9ms8eWF71pSkIZaTN6cREE9apr\n" + "sAuvuJgxadoOTjovCIjF0ZD9xteVId8ZAKLyGWCIYOfgIK6+pPGOi6eNbKtGikQX\n" + "uGfVQwZ8qtFog403mbfLYxWcj5GqtSuiDAhHTSTnvxVPSGxawQZPURaO9CM=\n" + "-----END CERTIFICATE-----\n" + "</ca>\n" + "<cert>\n" + "-----BEGIN CERTIFICATE-----\n" + "MIIC7zCCAdegAwIBAgIBBzANBgkqhkiG9w0BAQsFADAVMRMwEQYDVQQDDApPcGVu\n" + "VlBOIENBMB4XDTI1MTIxNzE0NDQyN1oXDTM1MTIxNjE0NDQyN1owGjEYMBYGA1UE\n" + "AwwPdXNlcnNfQVVUT0xPR0lOMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC\n" + "AQEAmUHaeRytfcXqK8NSqj15Tnnn9Emt16uOAcEQu3C4tS+YDvRTB9TdoYOvv6FL\n" + "8cEWGpXGeh5AfNXrvK4z/DbZVk8FWGdhOU50fEz2NXd2ga+bVuvEREKrz3mQWtnb\n" + "SC9Y7l3L2TIJQVv+OMisYkiT11Vvjrm1WiiuDG8HdW4WjgMMVnAS4riZ4gZiFDB2\n" + "n4jF4e6D0c0fY9/T06CISXiKTuTECtqQjzuAT8uP2GV/IC9wwwKwIpo0SkZXo2+I\n" + "o632A4nm3+eb60/0cxhI9Y4aKmTGsvM7pNqOXn1mxPLwWkRkWf6pKiBCCvXtAanB\n" + "hPpbuBNBfixcCmcxT93UYrPEcwIDAQABo0UwQzAMBgNVHRMBAf8EAjAAMAsGA1Ud\n" + "DwQEAwIHgDATBgNVHSUEDDAKBggrBgEFBQcDAjARBglghkgBhvhCAQEEBAMCB4Aw\n" + "DQYJKoZIhvcNAQELBQADggEBANZOAl+cJzM+HW1Nly/OWSq0fLTS6DaxS5hwrOnp\n" + "F//z+bVoTIDcM3JGybG5VW2qPLkgDxiGrBTEGUsihpdyMVSo/BRkArirx/vzALll\n" + "TJ24O3OyYhR9JuF4C1xXhb67G/hnYtt8VXtvacbpklvohmzEdFAeeRQrnLa1GRP9\n" + "9w6S+FMGegf9xQi2gqCKSRgrJoASKRm0stbjfJ5JPur2GWKspwqmoydm7Ak8qTaA\n" + "qBXW+xKfWuOTkA/nbWu+souRC/mQTt5i6tnn7Kgx7cVYwW6/FdRUr13mpU8PCnEy\n" + "npJ+sFuhNJkUsHe9Rk//ng3zA3dBeU0jDGZF63eh9uKOSYY=\n" + "-----END CERTIFICATE-----\n" + "</cert>\n" + "<key>\n" + "-----BEGIN PRIVATE KEY-----\n" + "MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCZQdp5HK19xeor\n" + "w1KqPXlOeef0Sa3Xq44BwRC7cLi1L5gO9FMH1N2hg6+/oUvxwRYalcZ6HkB81eu8\n" + "rjP8NtlWTwVYZ2E5TnR8TPY1d3aBr5tW68REQqvPeZBa2dtIL1juXcvZMglBW/44\n" + "yKxiSJPXVW+OubVaKK4Mbwd1bhaOAwxWcBLiuJniBmIUMHafiMXh7oPRzR9j39PT\n" + "oIhJeIpO5MQK2pCPO4BPy4/YZX8gL3DDArAimjRKRlejb4ijrfYDiebf55vrT/Rz\n" + "GEj1jhoqZMay8zuk2o5efWbE8vBaRGRZ/qkqIEIK9e0BqcGE+lu4E0F+LFwKZzFP\n" + "3dRis8RzAgMBAAECggEAS6BnguRX6HzFtZrJLCDxv3wArle9ZXPOu6bd7uENBLvb\n" + "uWVvo6mzRISLMXES3NV/ZtcJ/jD3eaLGlXERTiBy11hfNuSs4W6JpN0FkhTFcfGK\n" + "IjZtv5F23wcJ6QsgXlqe8+FtOlyqnIocxUChcE6IRfZu+mtBxp/UY2ZWs+gDUUgE\n" + "RUOG3vag8mtYeDEmyYwFMneRys8hHOMV38WJ316Oi6BS3h07HWcpR5WCpoPvvmmU\n" + "y5KN0FKzB3gW4Y1+UWTFpbGdPiKM0Ok6GGV2LMC+jkdXI+rInXqmcBKMRpI6oVkl\n" + "HUgxpyfw1j05hq5BySsdYMhdg+hAy7108krxnPRGwQKBgQDJuPuzd2jCDHsnDg+J\n" + "tUCmU1xWQwJCGkU5HYg7G0121Cmg3ybuXQPfiBCvkWUcqqMlR493k9zG0dVGjsLz\n" + "TFrI2LmMxaHFka9TVWYv8Kpeo+HzPm1JYSkOqtE1vdJy7u0osjKbWsRl1GwS3zwR\n" + "/bdcdtwk+622wGaj2FAJce8qmQKBgQDCfn08yotGvkzs6d8zL9slrhH4WBomjpDM\n" + "ZodteFIqWtrQGQ0SzXo6Gut2RHrHMa64LJTOFPUxOqxKaRYWYQVrFOiVQI5CnLTW\n" + "rYv8cOcQCxJITLT2aQfQfFk67f90jo1r7FafRxDxuh2w8OBuRje0ZyJqt3Qw7OzS\n" + "HZk5Wik66wKBgQCvrsifu65j2iTjla5Ym5/re4xeoEt2MJT7Mko0WAn2JL8AmXi5\n" + "fg7ifgkyLumltsMRs6oyVXehPJyHr8v/ww8J/x5SiMjkXYYZiLXPqMVoWUhu5X6e\n" + "utzcJk7AhEqlyIqJt/C1Nq73lLJvGTai4JnyEJ6YIw1erWB27+x83VqTeQKBgQCs\n" + "b2iplQmWVvHsugzhXPR2m7Xi8Hl+5bcLAXvgWmS+mH6XMR6eJP7QtT09Rcl1AV9e\n" + "emgTrhEU7GgEMNccUDh1j7wFV47JEBZknskVryOs3aP/5cIrFUOQXC7gSFHMDPbl\n" + "UEwcOu2S4uegEG9qVWbd0vJ4mt2w4t20C/nlF0KmsQKBgEjM6Hdel/WfotQJoqeb\n" + "7L+il5C8cZz5LTuNuGRmxovNoRUOq/sYL7veIYE3Xgyt9TSVb5YCmiu0FbdFITNF\n" + "+LI/Xst7JTOloRSPrkfNgmUmygZ6V/0ig7SomAqJEK5zuC6HEQtk+BTiyv22l+o/\n" + "Knzeo7Q6h9K3iu3Q0kwYPjBB\n" + "-----END PRIVATE KEY-----\n" + "</key>\n" + "<tls-crypt>\n" + "#\n" + "# 2048 bit OpenVPN static key (Server Agent)\n" + "#\n" + "-----BEGIN OpenVPN Static key V1-----\n" + "31d7b12e1b2f058208522d52ff1bee25\n" + "ab041e8823b2d367ee02c267cbd09271\n" + "db57df3c49097b82da5d3f2cde1154ba\n" + "ef69c3b8659266e46a4aa4b6f712014c\n" + "6ef3bc8fba009dc303aadb8893a6dac7\n" + "d66c60bfdfca57bc1f689b67862921e6\n" + "45a435b3dd4c787d75747eb47d03e86d\n" + "050e48f4b698b4aa7a64f193d1b58c0e\n" + "25bcb4e2d42f5c0ffbe2d419fd24fd6e\n" + "f8cf631a727908676b826dd821c47e38\n" + "65ba4d7ff41046ebc7c574080783d85a\n" + "79fe08f88d70d82bd39cac1a761a6f86\n" + "c92768a3ca3f8e0224d52ff1f67a121e\n" + "ab3d11c2f9fa4abbd3fad90e04692e9f\n" + "25f427045468bdfff2115b4a123d8d17\n" + "e5cf1658ea5dcc8a2ea921d8a0b542f2\n" + "-----END OpenVPN Static key V1-----\n" + "</tls-crypt>\n" + "## -----BEGIN RSA SIGNATURE-----\n" + "## DIGEST:sha256\n" + "## gnvm+g7a1mRcY2DwBz543AYhNvjhFVptbWBsSdFmYc35Hks+3D\n" + "## mXZu9Fi35ZAvtBtnHSBWx9ReRLwnZu465sHBPR5pwwACT654Nf\n" + "## VnYlYJjiCHXfC9JcSa2k7ZoY2NuC65y5hijp+atD8enmqTaH8e\n" + "## pyKKHIyNrwu2iD3OdLr6lSTwgsp7JdBxwRnnK7TVVvfuXMl3Tv\n" + "## NWojq4Nd5sxHoncyPuEIyrutqREBEoyV65xDnKkYDTMk9FjVkb\n" + "## 5sTXJpz6WOQO7M/zOiizr+X5VBR8MigL6i93tphi9Lf3SrrqJB\n" + "## TqtpqkvjcH+bygxvVDCICnGQHX8eN9y2cD1cOhOE7g==\n" + "## -----END RSA SIGNATURE-----\n" + "## -----BEGIN CERTIFICATE-----\n" + "## MIIDHzCCAgegAwIBAgIFANKPTBswDQYJKoZIhvcNAQELBQAwPjE8MDoGA1UEAwwz\n" + "## T3BlblZQTiBXZWIgQ0EgMjAyNS4xMi4xOCAxMzo1Njo1MyBVVEMgaXAtMTAtMC04\n" + "## LTEyMB4XDTI1MTIxNzE0NDI1N1oXDTI2MTIxODE0NDI1N1owFzEVMBMGA1UEAwwM\n" + "## My4yMTcuMTA3Ljc1MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxMUV\n" + "## y5hq/SDpb0G98pSGeIqUgzw5cO+IZFqktTfpO84l9iU5H1dhZoc+2mGuO1ZTPUA1\n" + "## /abAmGBKDoyASF1v9tndDyOg0brXQOLI5pq7zicDUB77hMLn92T9NSRpr8C9F1/N\n" + "## WnAc1DHFaQIDl8S11Uy2nzVGVsSJVACZV75pB9SvkClgkKmwnvlHB4bduLBaHO36\n" + "## L4nS8mBK4uUXCZ9oCnOovEBZSJY0MGelSJsC5l10wbNBfzlFEFLp27mymd9FtboR\n" + "## IF8HRhbD77igspWAycwAY9mdw5gx4jHbJusTZriqGTHv9QSwLrdSJddDoGz8QRvq\n" + "## husKOMxluaaFVtJ2BwIDAQABo0swSTAMBgNVHRMBAf8EAjAAMAsGA1UdDwQEAwIF\n" + "## oDATBgNVHSUEDDAKBggrBgEFBQcDATAXBgNVHREEEDAOggwzLjIxNy4xMDcuNzUw\n" + "## DQYJKoZIhvcNAQELBQADggEBAKq1gj2LYlrq4eKm9dnOIa6dsL0I5mHFdObgBaX6\n" + "## qhP85fA+63BQ/ReAyDcVjK61ucy9SORcbjdCz40fLr6qR+7TcRox33hSefQGOgSM\n" + "## WbrVXDu3HAKI6bYMzJyWqn3UBd9vzMEa6GoN9wWMCkHnlXIGhnEt9QN83s5X8BdP\n" + "## zDCavdkiwBsBv1qOrXigymfwms9hmLaZc+EDGqUasJ8IcNMAbLVUOKpttU6CtVoA\n" + "## lDTmH/APcYkv0D10KsBInia0flMQgZ3MjYp09P8PpUsk3YzlQvwc7LadyVQjUkim\n" + "## sv9Xiic4S8bieiJbEwI3p699sXRpJi5jrxaDa0zcjUrhSqA=\n" + "## -----END CERTIFICATE-----\n" + "## -----BEGIN CERTIFICATE-----\n" + "## MIIDGjCCAgKgAwIBAgIEaUQIJTANBgkqhkiG9w0BAQsFADA+MTwwOgYDVQQDDDNP\n" + "## cGVuVlBOIFdlYiBDQSAyMDI1LjEyLjE4IDEzOjU2OjUzIFVUQyBpcC0xMC0wLTgt\n" + "## MTIwHhcNMjUxMjE3MTM1NjUzWhcNMzUxMjE2MTM1NjUzWjA+MTwwOgYDVQQDDDNP\n" + "## cGVuVlBOIFdlYiBDQSAyMDI1LjEyLjE4IDEzOjU2OjUzIFVUQyBpcC0xMC0wLTgt\n" + "## MTIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC94L7SsQxT3rY5c7pf\n" + "## CbfqO1VrfpMw1gyghU0KOrH+TEDBH8NCLDV3B1ddXtYHG9vOknMfST9mxgNUDJ1C\n" + "## nYWBF/Z4xBT3l80nfeyhGC0ZLZJfpt2U0b5najQ+RcpAvvISZMEVEtiQzBz563yF\n" + "## ZiA2/2Qi7k1FKG8yxYiOgisDnJwmov1qHgZ3Js2EP/5bcCsrpQPb37SwTaP4HB9K\n" + "## pPVxt6ZJo/q+e9BkD9bkeJxht6Y2QNuqpm65lo7XXyQp+zIvNgSxDa18n+xeddzi\n" + "## rWTz0AEJfUWsY7b7Hm2rK4YTmotrzAbw441Hd6EjNQVwGp9acaLvR8tYsz2dP+wi\n" + "## G9OdAgMBAAGjIDAeMA8GA1UdEwEB/wQFMAMBAf8wCwYDVR0PBAQDAgEGMA0GCSqG\n" + "## SIb3DQEBCwUAA4IBAQCehVL3F04BX44OpZi37gEGV11cmejyv9B2jl/mbx/aoOIE\n" + "## Ai3+g3Kbz/hk4ZRLtW1+/qU1InbGVpT4l2UO/qkcyHsm0YeUkml7fZFxaPrIubh2\n" + "## VrxftNPmP2tMr3ir+lZTjbTyi0KjkIVkyQ7gnqckFKh5gge0QuENgsEiuOnSc8hq\n" + "## M+MrfJNu1QVtOJriqBRq1oMuhHBV/9z/2RnNZrsrX+S4Epdp+6oxlr5K9fj7tn7y\n" + "## sWXxvyH7qoSU6Ehn1Y7reUkUiMW+yUaC15i2luJGw7h0UeYEQl+jtLHudgpGguwz\n" + "## Elon3i5S7RnksbT2QAeR177IdYLJwtz2d0FRwhYN\n" + "## -----END CERTIFICATE-----\n"
        )
    }

    fun disconnectVpn() {
        viewModelScope.launch(Dispatchers.IO) {
            vpnRepository.disconnectVpn()
        }
    }
}